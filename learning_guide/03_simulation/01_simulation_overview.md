# 3.1 시뮬레이션 개요

시뮬레이션은 실제 하드웨어 없이 로봇을 테스트하고 학습할 수 있는 가상 환경입니다.

## 시뮬레이션이 필요한 이유

### 🚀 빠른 시작
- 실제 로봇 구매 전에 학습 시작
- 부품 조달/조립 시간 절약
- 즉시 실습 가능

### 💰 비용 절감
- 하드웨어 구매 비용 불필요 ($660+ 절약)
- 부품 손상 걱정 없음
- 무한 실험 가능

### 🔁 반복 실험
- 같은 조건으로 무한 반복
- 빠른 리셋 (초 단위)
- 위험한 실험도 안전하게

### 📊 데이터 수집
- RL 학습용 대량 데이터 생성
- 완벽한 센서 데이터
- Ground truth 확보

### 🧪 알고리즘 개발
- 제어 알고리즘 개발 및 테스트
- 파라미터 튜닝
- 실제 로봇 이전에 검증

---

## XLeRobot에서 사용 가능한 시뮬레이터

### 1. MuJoCo (추천 ⭐⭐⭐⭐⭐)

**특징**:
- 빠른 물리 시뮬레이션
- 가벼운 설치 및 실행
- 정확한 접촉 역학
- Python 바인딩

**장점**:
- ✅ 초보자 친화적
- ✅ 빠른 시작 (5분)
- ✅ GPU 불필요
- ✅ 안정적인 시뮬레이션

**단점**:
- ❌ 시각화 품질 기본적
- ❌ 센서 시뮬레이션 제한적

**추천 용도**: 
- 제어 알고리즘 개발
- 운동학 학습
- 빠른 프로토타이핑

---

### 2. NVIDIA Isaac Sim

**특징**:
- 사실적인 렌더링 (RTX)
- 고급 센서 시뮬레이션
- ROS/ROS2 통합
- Omniverse 기반

**장점**:
- ✅ 포토리얼리스틱 렌더링
- ✅ 정밀한 카메라/LIDAR 시뮬레이션
- ✅ 대규모 환경
- ✅ AI 통합 (Jetson)

**단점**:
- ❌ NVIDIA GPU 필수 (RTX 권장)
- ❌ 무거운 설치 (20GB+)
- ❌ 학습 곡선 가파름
- ❌ 느린 시뮬레이션 속도

**추천 용도**:
- 비전 알고리즘 개발
- 사실적인 데모
- 복잡한 환경 시뮬레이션

---

### 3. ManiSkill

**특징**:
- 강화학습 전용 환경
- GPU 병렬 시뮬레이션
- 벤치마크 태스크
- Gymnasium 호환

**장점**:
- ✅ RL 학습에 최적화
- ✅ 병렬 환경 (수백 개)
- ✅ 표준화된 태스크
- ✅ 빠른 학습

**단점**:
- ❌ RL 경험 필요
- ❌ 제한적인 커스터마이징
- ❌ 시각화 제한적

**추천 용도**:
- 강화학습 연구
- 벤치마킹
- 대규모 데이터 생성

---

## 시뮬레이터 비교표

| 항목 | MuJoCo | Isaac Sim | ManiSkill |
|------|--------|-----------|-----------|
| **난이도** | ⭐⭐ 쉬움 | ⭐⭐⭐⭐ 어려움 | ⭐⭐⭐ 중간 |
| **설치 시간** | 5분 | 1시간+ | 15분 |
| **시뮬레이션 속도** | 빠름 | 느림 | 빠름 |
| **그래픽 품질** | 기본 | 우수 | 좋음 |
| **GPU 필요** | ❌ | ✅ 필수 | 선택 |
| **메모리** | ~500MB | ~8GB | ~2GB |
| **RL 지원** | 기본 | 우수 | 전문 |
| **ROS 통합** | 수동 | 내장 | 제한적 |
| **초보자 추천** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |

---

## 권장 학습 순서

### 단계 1: MuJoCo 시작 (필수)
```bash
cd ~/XLeRobot/simulation/mujoco/
python xlerobot_mujoco.py
```

**학습 내용**:
- 로봇 구조 이해
- 기본 제어 개념
- 키보드 텔레오퍼레이션

**소요 시간**: 1-2일

---

### 단계 2: ManiSkill (RL 학습)

```bash
cd ~/XLeRobot/simulation/Maniskill/
python run_xlerobot_sim.py
```

**학습 내용**:
- RL 환경 설정
- 에이전트 학습
- 정책 평가

**소요 시간**: 1주

---

### 단계 3: Isaac Sim (선택)

```bash
# Isaac Sim Omniverse 설치 후
# XLeRobot URDF 로드
```

**학습 내용**:
- 사실적인 렌더링
- 고급 센서 시뮬레이션
- ROS 통합

**소요 시간**: 2-3일

---

## 시뮬레이션 vs 실제 로봇

### 시뮬레이션의 한계

| 항목 | 시뮬레이션 | 실제 로봇 |
|------|-----------|-----------|
| **물리 정확도** | 근사치 | 실제 |
| **센서 노이즈** | 선택적 | 항상 존재 |
| **지연** | 없음 | 있음 (통신, 제어) |
| **마찰/마모** | 이상적 | 현실적 |
| **환경 변화** | 통제됨 | 예측 불가 |

### Sim-to-Real Gap (시뮬레이션-실제 간극)

**문제점**:
- 시뮬레이션에서 잘 작동하는 제어가 실제에서 실패
- 물리 파라미터 불일치
- 센서 노이즈 미고려

**해결 방법**:
1. **도메인 랜덤화**: 시뮬레이션 파라미터 무작위화
2. **현실적인 노이즈 추가**: 센서 노이즈 시뮬레이션
3. **실제 데이터 혼합**: 실제 로봇 데이터로 파인튜닝
4. **보수적인 제어**: 안전 마진 확보

---

## 시뮬레이션 활용 전략

### 개발 단계별 활용

#### 1단계: 개념 증명 (PoC)
- 🎯 **목표**: 아이디어 검증
- 🛠️ **도구**: MuJoCo
- ⏱️ **기간**: 1-3일

#### 2단계: 알고리즘 개발
- 🎯 **목표**: 제어 알고리즘 완성
- 🛠️ **도구**: MuJoCo + ManiSkill
- ⏱️ **기간**: 1-2주

#### 3단계: RL 학습
- 🎯 **목표**: 정책 학습
- 🛠️ **도구**: ManiSkill
- ⏱️ **기간**: 수일-수주

#### 4단계: 비전 통합
- 🎯 **목표**: 카메라 기반 제어
- 🛠️ **도구**: Isaac Sim
- ⏱️ **기간**: 1주

#### 5단계: 실제 로봇 이전
- 🎯 **목표**: Sim-to-Real
- 🛠️ **도구**: 실제 하드웨어
- ⏱️ **기간**: 수일-수주

---

## 시뮬레이션 환경 설정 체크리스트

### MuJoCo 설정 (5분)
- [ ] Python 3.8+ 설치
- [ ] `mujoco` 패키지 설치
- [ ] `mujoco-python-viewer` 설치
- [ ] `glfw` 설치
- [ ] 테스트 실행

### Isaac Sim 설정 (1시간+)
- [ ] NVIDIA GPU 드라이버 (최신)
- [ ] Omniverse Launcher 설치
- [ ] Isaac Sim 다운로드 (20GB+)
- [ ] 라이선스 활성화
- [ ] 예제 실행 테스트

### ManiSkill 설정 (15분)
- [ ] `mani-skill2` 패키지 설치
- [ ] `gymnasium` 설치
- [ ] SAPIEN 설치
- [ ] 예제 환경 로드 테스트

---

## 요약

### 핵심 포인트

1. **시뮬레이션 먼저**: 실제 로봇 전에 시뮬레이션으로 학습
2. **MuJoCo 시작**: 가장 쉽고 빠른 시작
3. **목적에 맞게 선택**: 
   - 제어 → MuJoCo
   - RL → ManiSkill
   - 비전 → Isaac Sim
4. **Sim-to-Real 고려**: 실제 이전 계획 필요

### 다음 단계

[3.2 MuJoCo 시뮬레이션 시작하기 →](https://github.com/dinnerandcoffee/xlerobot-learning-guide/blob/main/learning_guide/03_simulation/02_mujoco_setup.md)에서 실제로 MuJoCo를 설치하고 실행해봅니다!

---

[← 3장 목차](https://github.com/dinnerandcoffee/xlerobot-learning-guide/blob/main/learning_guide/03_simulation/README.md) | [다음: 3.2 MuJoCo 설정 →](https://github.com/dinnerandcoffee/xlerobot-learning-guide/blob/main/learning_guide/03_simulation/02_mujoco_setup.md)
